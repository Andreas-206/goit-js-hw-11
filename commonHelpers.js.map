{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41701983-23ca5d5908e2c78927e8095f2';\n\nconst getBaseUrl = () => {\n  const url = new URL(BASE_URL);\n  url.searchParams.append(\"key\", API_KEY)\n\n  return url;\n}\n\nconst fetchImg = (query) => {\n  const url = getBaseUrl();\n  url.searchParams.append(\"q\", query);\n\n  return fetch(url)\n    .then((res) => {\n      if (!res.ok) {\n        throw new Error(`HTTP error! Status: ${res.status}`);\n      }\n      return res.json();\n    })\n    .then((data) => data.hits)\n    .catch((error) => {\n      console.error(`Error fetching images:`, error);\n      throw error;\n    });\n};\n\nconst renderGallery = (images) => {\n  const galleryCoontainer = document.getElementById(\"gallery\");\n  galleryCoontainer.innerHTML = \"\";\n\n  const lightbox = new SimpleLightbox(\".gallery-item\");\n\n  images.forEach(({ image }) => {\n    galleryCoontainer.insertAdjacentHTML(\"beforeend\", `\n    <a href=\"${largeImageURL}\" class=\"gallery-item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\">\n    </a>\n    `);\n  });\n\n  lightbox.refresh();\n};\n\nlet loader = document.getElementById(\"loader\");\n\nconst showLoadingIndicator = () => {\n  loader.style.display = \"block\";\n};\n\nconst hideLoadingIndicator = () => {\n  loader.style.display = \"none\";\n};\n\nconst showMessage = (message, type = \"info\") => {\n  iziToast[type]({\n    title: message,\n    position: \"topCenter\",\n  });\n};\n\nconst handleSearhFormSubmit = (event) => {\n  event.preventDefault();\n\n  const searchInput = document.getElementById(\"search-input\");\n  const query = searchInput.value.trim();\n\n  if (query === \"\") {\n    showMessage(\"Please enter a search query\", \"warning\");\n    return;\n  }\n\n  showLoadingIndicator();\n\n  fetchImg(guery)\n    .then((images) => {\n      hideLoadingIndicator();\n      if (images.length > 0) {\n        renderGallery(images);\n      } else {\n        showMessage(\"Sorry, there are no images matching your search query. Please try again.\", \"error\");\n      }\n    })\n    .catch((error) => {\n      hideLoadingIndicator();\n      showMessage(\"Error fetching images. Pease try again later.\", \"error\");\n    });\n};\n\nconst searchForm = document.getElementById(\"search-form\");\nsearchForm.addEventListener(\"submit\", handleSearchFormSubmit);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// const url = getBaseUrl();\n// url.searchParams.append(\"q\", \"query\");\n\n// fetch(url)\n//   .then(res => res.json())\n//   .then(images => {\n//     document.body.insertAdjacentHTML(\"beforeend\", `\n//     <img src=\"${images.hits[0].largeImageURL}\"/>\n//     `)\n//   })"],"names":["searchForm"],"mappings":"0uBAoDa,SAAS,eAAe,QAAQ,EA6C7C,MAAMA,EAAa,SAAS,eAAe,aAAa,EACxDA,EAAW,iBAAiB,SAAU,sBAAsB"}